{"version":3,"sources":["webpack:///./src/views/Auth.vue","webpack:///./src/use/login-form.js","webpack:///./src/views/Auth.vue?80ab"],"names":["_createElementVNode","for","class","_createElementBlock","onSubmit","_ctx","_hoisted_1","_normalizeClass","invalid","_hoisted_2","type","id","$event","onBlur","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","disabled","_hoisted_6","useLoginForm","store","useStore","router","useRouter","useForm","handleSubmit","isSubmitting","submitCount","useField","yup","trim","required","email","value","eError","errorMessage","eBlur","handleBlur","MIN_LENGTH","min","password","pError","pBlur","isTooManyAttempts","computed","watch","val","setTimeout","values","console","log","dispatch","push","setup","route","useRoute","query","message","error","__exports__","render"],"mappings":"2IAEIA,eAAc,UAAV,SAAK,G,EAGPA,eAAgC,SAAzBC,IAAI,SAAQ,SAAK,G,YAMxBD,eAAsC,SAA/BC,IAAI,YAAW,YAAQ,G,kCAS3BC,MAAM,e,gDAnBbC,eAsBO,QAtBDD,MAAM,OAAQE,SAAM,8CAAUC,4CAAQ,eAA5C,CACEC,EAEAN,eAIM,OAJAE,MAAKK,gCAAAC,QAA8BH,aAAzC,CACEI,iBACAT,eAA6D,SAAtDU,KAAK,QAAQC,GAAG,Q,qDAAiBN,QAAKO,IAAGC,OAAI,8BAAER,uCAAtD,mBAAwCA,WAC3BA,2BAAbF,eAAyC,QAAAW,EAAAC,eAAjBV,UAAM,IAA9B,uBAHF,GAMAL,eAIM,OAJAE,MAAKK,gCAAAC,QAA8BH,aAAzC,CACEW,iBACAhB,eAAsE,SAA/DU,KAAK,WAAWC,GAAG,W,qDAAoBN,WAAQO,IAAGC,OAAI,8BAAER,uCAA/D,mBAA8CA,cACjCA,2BAAbF,eAAyC,QAAAc,EAAAF,eAAjBV,UAAM,IAA9B,uBAHF,GAMAL,eAES,UAFDE,MAAM,cAAcQ,KAAK,SAAUQ,SAAUb,gBAAgBA,qBAAmB,UAExF,EAAAc,GAE+Bd,sCAA/BF,eAEM,MAFN,EAAkD,sDAAlD,uBAnBF,I,4GCKK,SAASiB,IACd,IAAMC,EAAQC,iBACRC,EAASC,iBAEf,EAAoDC,iBAA5CC,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,aAAcC,EAApC,EAAoCA,YAEpC,EAAkEC,eAChE,QACAC,SAEGC,OACAC,SAAS,0BACTC,MAAM,+BANIA,EAAf,EAAQC,MAA4BC,EAApC,EAAsBC,aAAkCC,EAAxD,EAA4CC,WAStCC,EAAa,EAEnB,EAAqEV,eACnE,WACAC,SAEGC,OACAC,SAAS,0BACTQ,IAAID,EAJP,sCAIkDA,EAJlD,cAFaE,EAAf,EAAQP,MAA+BQ,EAAvC,EAAyBN,aAAkCO,EAA3D,EAA+CL,WASzCM,EAAoBC,gBAAS,kBAAMjB,EAAYM,OAAS,KAE9DY,eAAMF,GAAmB,SAAAG,GACnBA,GACFC,YAAW,WACTpB,EAAYM,MAAQ,IACnB,QAIP,IAAM9B,EAAWsB,EAAY,yDAAC,WAAMuB,GAAN,wFAC5BC,QAAQC,IAAI,gBAAiBF,GADD,kBAGpB5B,EAAM+B,SAAS,aAAcH,GAHT,OAI1B1B,EAAO8B,KAAK,KAJc,0GAAD,uDAS7B,MAAO,CACLpB,QACAQ,WACAN,SACAO,SACAL,QACAM,QACAvC,WACAuB,eACAiB,qB,gBD5BW,GAGbU,MAHa,WAIX,IAAMC,EAAQC,iBACRnC,EAAQC,iBAQd,OANIiC,EAAME,MAAMC,SACdrC,EAAM+B,SAAS,aAAc,CAC3BlB,MAAOyB,eAAMJ,EAAME,MAAMC,SACzBhD,KAAM,YAGH,kBAAKU,O,qBExChB,MAAMwC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d0be70b.61d2d48f.js","sourcesContent":["<template>\n  <form class=\"card\" @submit.prevent=\"onSubmit\">\n    <h1>Login</h1>\n\n    <div :class=\"['form-control', { invalid: eError }]\">\n      <label for=\"email\">Email</label>\n      <input type=\"email\" id=\"email\" v-model=\"email\" @blur=\"eBlur\">\n      <small v-if=\"eError\">{{ eError }}</small>\n    </div>\n\n    <div :class=\"['form-control', { invalid: pError }]\">\n      <label for=\"password\">Password</label>\n      <input type=\"password\" id=\"password\" v-model=\"password\" @blur=\"pBlur\">\n      <small v-if=\"pError\">{{ pError }}</small>\n    </div>\n\n    <button class=\"btn primary\" type=\"submit\" :disabled=\"isSubmitting || isTooManyAttempts\">\n      Login\n    </button>\n\n    <div class=\"text-danger\" v-if=\"isTooManyAttempts\">\n      You too often try to login to system. Try later\n    </div>\n  </form>\n</template>\n\n<script>\nimport { useLoginForm } from '../use/login-form'\nimport {useRoute} from \"vue-router\";\nimport {useStore} from \"vuex\";\nimport { error } from '../utils/error'\n\nexport default {\n\n\n  setup() {\n    const route = useRoute()\n    const store = useStore()\n\n    if (route.query.message) {\n      store.dispatch('setMessage', {\n        value: error(route.query.message),\n        type: 'warning'\n      })\n    }\n    return { ...useLoginForm() }\n  }\n}\n</script>\n","import { useField, useForm } from 'vee-validate'\nimport * as yup from 'yup'\nimport {computed, watch} from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport function useLoginForm () {\n  const store = useStore()\n  const router = useRouter()\n\n  const { handleSubmit, isSubmitting, submitCount } = useForm()\n\n  const { value: email, errorMessage: eError, handleBlur: eBlur } = useField(\n    'email',\n    yup\n      .string()\n      .trim()\n      .required('This field is required')\n      .email('Enter correct email please')\n  )\n\n  const MIN_LENGTH = 6\n\n  const { value: password, errorMessage: pError, handleBlur: pBlur } = useField(\n    'password',\n    yup\n      .string()\n      .trim()\n      .required('This field is required')\n      .min(MIN_LENGTH, `Min length of value must be ${MIN_LENGTH} symbols`)\n  )\n\n  const isTooManyAttempts = computed(() => submitCount.value >= 3)\n\n  watch(isTooManyAttempts, val => {\n    if (val) {\n      setTimeout(() => {\n        submitCount.value = 0\n      }, 5000)\n    }\n  })\n\n  const onSubmit = handleSubmit(async values => {\n    console.log('Form values: ', values)\n    try {\n      await store.dispatch('auth/login', values)\n      router.push('/')\n    } catch (err) {\n    }\n  })\n\n  return {\n    email,\n    password,\n    eError,\n    pError,\n    eBlur,\n    pBlur,\n    onSubmit,\n    isSubmitting,\n    isTooManyAttempts\n  }\n}\n","import { render } from \"./Auth.vue?vue&type=template&id=3ca5e866\"\nimport script from \"./Auth.vue?vue&type=script&lang=js\"\nexport * from \"./Auth.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/admin/Desktop/01.1 14-practice-start/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}